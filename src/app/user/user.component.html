<div class="container mt-5">
  <div class="card shadow p-4">
    <h2 class="text-center">Mein Profil</h2>

    <div *ngIf="successMessage" class="alert alert-success">{{ successMessage }}</div>
    <div *ngIf="errorMessage" class="alert alert-danger">{{ errorMessage }}</div>

    <div *ngIf="userData; else loading">
      <form *ngIf="isEditing; else viewMode" (ngSubmit)="onSaveChanges()">
        <!-- Grunddaten -->
        <div class="mb-3">
          <label for="email" class="form-label">E-Mail (nicht Ã¤nderbar)</label>
          <input type="email" class="form-control" id="email" [value]="userData.email" disabled>
        </div>
        <div class="mb-3">
          <label for="username" class="form-label">Benutzername</label>
          <input type="text" class="form-control" id="username" [(ngModel)]="updatedUserData.userName" name="username">
          <div *ngIf="errorMessage" class="text-danger mt-1">{{ errorMessage }}</div>
        </div>

        <!-- PersÃ¶nliche Informationen -->
        <div class="mb-3">
          <label for="title" class="form-label">Titel</label>
          <input type="text" class="form-control" id="title" [(ngModel)]="updatedUserData.title" name="title">
          <div *ngIf="errorMessage" class="text-danger mt-1">{{ errorMessage }}</div>
        </div>
        <div class="mb-3">
          <label for="gender" class="form-label">Geschlecht</label>
          <select class="form-control" id="gender" [(ngModel)]="updatedUserData.gender" name="gender">
            <option value="">Bitte auswÃ¤hlen</option>
            <option value="male">MÃ¤nnlich</option>
            <option value="female">Weiblich</option>
            <option value="other">Divers</option>
          </select>
        </div>

        <!-- Telefonnummern -->
        <div class="mb-3">
          <label for="phonePrivate" class="form-label">Telefon (Privat)</label>
          <input type="text" class="form-control" id="phonePrivate" [(ngModel)]="updatedUserData.phonePrivate" name="phonePrivate">
          <div *ngIf="errorMessage" class="text-danger mt-1">{{ errorMessage }}</div>
        </div>
        <div class="mb-3">
          <label for="phoneMobile" class="form-label">Telefon (Mobil)</label>
          <input type="text" class="form-control" id="phoneMobile" [(ngModel)]="updatedUserData.phoneMobile" name="phoneMobile">
          <div *ngIf="errorMessage" class="text-danger mt-1">{{ errorMessage }}</div>
        </div>
        <div class="mb-3">
          <label for="phoneWork" class="form-label">Telefon (Arbeit)</label>
          <input type="text" class="form-control" id="phoneWork" [(ngModel)]="updatedUserData.phoneWork" name="phoneWork">
          <div *ngIf="errorMessage" class="text-danger mt-1">{{ errorMessage }}</div>
        </div>

        <!-- Alter & Geburtsdatum -->
        <div class="mb-3">
          <label for="birthDate" class="form-label">Geburtsdatum</label>
          <input type="date" class="form-control" id="birthDate" [(ngModel)]="updatedUserData.birthDate" name="birthDate">
          <div *ngIf="errorMessage" class="text-danger mt-1">{{ errorMessage }}</div>
        </div>
        <div class="mb-3">
          <label for="age" class="form-label">Alter</label>
          <input type="number" class="form-control" id="age" [(ngModel)]="updatedUserData.age" name="age">
          <div *ngIf="errorMessage" class="text-danger mt-1">{{ errorMessage }}</div>
        </div>

        <!-- Adresse -->
        <div class="mb-3">
          <label for="street" class="form-label">StraÃŸe</label>
          <input type="text" class="form-control" id="street" [(ngModel)]="updatedUserData.street" name="street">
          <div *ngIf="errorMessage" class="text-danger mt-1">{{ errorMessage }}</div>
        </div>
        <div class="mb-3">
          <label for="zip" class="form-label">PLZ</label>
          <input type="text" class="form-control" id="zip" [(ngModel)]="updatedUserData.zip" name="zip">
          <div *ngIf="errorMessage" class="text-danger mt-1">{{ errorMessage }}</div>
        </div>
        <div class="mb-3">
          <label for="city" class="form-label">Stadt</label>
          <input type="text" class="form-control" id="city" [(ngModel)]="updatedUserData.city" name="city">
          <div *ngIf="errorMessage" class="text-danger mt-1">{{ errorMessage }}</div>
        </div>
        <div class="mb-3">
          <label for="country" class="form-label">Land</label>
          <input type="text" class="form-control" id="country" [(ngModel)]="updatedUserData.country" name="country">
          <div *ngIf="errorMessage" class="text-danger mt-1">{{ errorMessage }}</div>
        </div>

        <!-- Buttons -->
        <button type="submit" class="btn btn-success">ðŸ’¾ Ã„nderungen speichern</button>
        <button type="button" class="btn btn-outline-secondary ms-2" (click)="toggleEdit()">âœ– Abbrechen</button>
      </form>

      <ng-template #viewMode>
        <p><strong>E-Mail:</strong> {{ userData.email }}</p>
        <p><strong>Benutzername:</strong> {{ userData.userName }}</p>
        <p><strong>Geburtsdatum:</strong> {{ userData.birthDate || 'Nicht angegeben' }}</p>
        <p><strong>Telefon (Privat):</strong> {{ userData.phonePrivate || 'Nicht angegeben' }}</p>
        <p><strong>Adresse:</strong> {{ userData.street || '-' }}, {{ userData.city || '-' }}, {{ userData.zip || '-' }}, {{ userData.country || '-' }}</p>
        <button class="btn btn-warning" (click)="toggleEdit()">Bearbeiten</button>
      </ng-template>
    </div>

    <ng-template #loading>
      <p>Lade Benutzerdaten...</p>
    </ng-template>
  </div>
</div>
